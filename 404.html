<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>404 ‚Äî Something's Broken</title>
    <meta name="color-scheme" content="dark light">
    <script>
        // Configure Tailwind and set theme before paint
        tailwind = window.tailwind || {};
        tailwind.config = {
            darkMode: 'class',
            safelist: [
                'sticky','top-0','z-50','backdrop-blur',
                'bg-white/70','dark:bg-zinc-950/70','border-b','border-zinc-200/60','dark:border-zinc-800/60',
                'font-semibold','tracking-tight',
                'flex','items-center','gap-4','text-sm',
                'hover:opacity-80',
                'rounded-xl','px-3','py-1','bg-zinc-100','dark:bg-zinc-900',
                'mt-20','border-t','text-zinc-500','max-w-6xl','py-10','px-6','mx-auto'
            ]
        };
        window.tailwind = tailwind;
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        (function() {
            try {
                var d = localStorage.theme;
                var prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
                document.documentElement.classList.toggle('dark', d === 'dark' || (!d && prefersDark));
            } catch (e) {}
        })();
    </script>
    <style>
        .scroll-shape { position: fixed; top: 0; right: 0; height: 100vh; width: clamp(220px, 28vw, 420px); pointer-events: none; opacity: 0.2; z-index: -1; }
        .scroll-shape svg { width: 100%; height: 100%; display: block; }
        .scroll-shape-left { position: fixed; top: 0; left: 0; height: 100vh; width: clamp(220px, 28vw, 420px); pointer-events: none; opacity: 0.2; z-index: -1; }
        .scroll-shape-left svg { width: 100%; height: 100%; display: block; }
        :root { --shape-a: #294686; --shape-b: #22c55e; }
        html.dark { --shape-a: #294686; --shape-b: #34d399; }
    </style>
    <style>
        :root {
            --bg: #ffffff;
            --fg: #0a0a0a;
            --muted: #666666;
            --card: #f6f6f7;
            --border: #e5e5e5;
            --accent: #2563eb;
            --accent-contrast: #ffffff;
        }

        @media (prefers-color-scheme: dark) {
            :root {
                --bg: #0b0b0f;
                --fg: #fafafa;
                --muted: #a1a1aa;
                --card: #0f1115;
                --border: #25262b;
            }
        }

        html, body { height: 100%; }

        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            background: var(--bg);
            color: var(--fg);
            display: grid;
            place-items: center;
        }

        .wrap {
            max-width: 720px;
            padding: 32px 20px 40px;
            text-align: center;
        }

        .hazard {
            width: 100%;
            height: 14px;
            margin-bottom: 22px;
            background-image: repeating-linear-gradient(45deg, #facc15 0 16px, #111827 16px 32px);
            border-radius: 10px;
            box-shadow: 0 0 0 1px var(--border) inset;
        }

        .icon { font-size: 56px; line-height: 1; }

        h1 {
            margin: 12px 0 8px;
            font-size: 28px;
            font-weight: 800;
            letter-spacing: -0.02em;
        }

        p.lead {
            margin: 0 auto 18px;
            max-width: 52ch;
            color: var(--muted);
        }

        .console {
            text-align: left;
            margin: 18px auto 24px;
            max-width: 640px;
            padding: 14px 16px;
            background: var(--card);
            border: 1px solid var(--border);
            border-radius: 14px;
            font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
            font-size: 13px;
            color: var(--muted);
            white-space: pre-wrap;
        }

        .actions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
            margin-top: 6px;
        }

        .btn {
            display: inline-block;
            padding: 10px 14px;
            border-radius: 12px;
            border: 1px solid var(--border);
            background: var(--card);
            color: var(--fg);
            text-decoration: none;
            transition: transform 0.06s ease, background 0.2s ease, border-color 0.2s ease, opacity 0.2s ease;
        }

        .btn:hover { transform: translateY(-1px); }

        .btn.primary {
            background: var(--accent);
            border-color: transparent;
            color: var(--accent-contrast);
        }

        .hint {
            margin-top: 18px;
            font-size: 12px;
            color: var(--muted);
        }
    </style>
</head>
<body>
    <div class="scroll-shape" aria-hidden="true">
        <svg id="netSvg" viewBox="0 0 400 800" preserveAspectRatio="none">
            <defs>
                <linearGradient id="grad" x1="0%" y1="0%" x2="100%" y2="100%">
                    <stop offset="0%" stop-color="var(--shape-a)"/>
                    <stop offset="100%" stop-color="var(--shape-b)"/>
                </linearGradient>
                <filter id="blur6"><feGaussianBlur stdDeviation="6"/></filter>
            </defs>
            <g id="links" stroke="url(#grad)" stroke-width="1.2" stroke-linecap="round" opacity="0.55"></g>
            <g id="nodes" fill="url(#grad)" filter="url(#blur6)"></g>
        </svg>
    </div>
    <div class="scroll-shape-left" aria-hidden="true">
        <svg id="netSvgLeft" viewBox="0 0 400 800" preserveAspectRatio="none">
            <defs>
                <linearGradient id="gradL" x1="100%" y1="0%" x2="0%" y2="100%">
                    <stop offset="0%" stop-color="var(--shape-b)"/>
                    <stop offset="100%" stop-color="var(--shape-a)"/>
                </linearGradient>
                <filter id="blur6L"><feGaussianBlur stdDeviation="6"/></filter>
            </defs>
            <g id="linksL" stroke="url(#gradL)" stroke-width="1.2" stroke-linecap="round" opacity="0.55"></g>
            <g id="nodesL" fill="url(#gradL)" filter="url(#blur6L)"></g>
        </svg>
    </div>
    <main class="wrap">
        <div class="hazard"></div>
        <div class="icon">üõ†Ô∏è</div>
        <h1>Something's broken ‚Äî roomate probably kicked my server.</h1>
        <p class="lead">We tried to assemble this page, but a part went missing. It's probably a loose connector (or a typo in the URL).</p>
        <pre class="console">[E404] PageNotFoundError
> requested: <span id="path">/unknown</span>
> action: return to base or file a bug report
> status: awaiting field report‚Ä¶</pre>
        <div class="actions">
            <a class="btn primary" id="emailLink" href="mailto:Joshua.lobe@gmail.com?subject=404%20on%20JoshuaLobe.com&body=URL%3A%20{URL}%0A%0AWhat%20you%20were%20doing%3A%20%0A%0AExpected%20result%3A%20%0A%0AActual%20result%3A%20">Report Bug via Email</a>
            <a class="btn" href="/#contact">Go to Contact</a>
            <a class="btn" href="/">Back to Home</a>
        </div>
        <div class="hint">üí° Tip: Try turning it off and on again. If that fails, bring a multimeter.</div>
    </main>

    <script>
        // Auto-fill the current path and email body with the failing URL
        document.addEventListener('DOMContentLoaded', function () {
            var pathSpan = document.getElementById('path');
            if (pathSpan) { 
                pathSpan.textContent = window.location.pathname; 
            }

            var email = document.getElementById('emailLink');
            if (email) {
                try {
                    var url = new URL(email.href);
                    var body = url.searchParams.get('body') || '';
                    body = body.replace('{URL}', encodeURIComponent(window.location.href));
                    url.searchParams.set('body', body);
                    email.href = url.toString();
                } catch (e) {
                    // Fallback if URL parsing fails
                    console.log('Could not update email link:', e);
                }
            }
        });
    </script>
    <script>
        // Scroll-reactive morphing networks (right + left)
        document.addEventListener('DOMContentLoaded', () => {
            function buildNetwork(svgId, nodesId, linksId, opts) {
                const svg = document.getElementById(svgId);
                const nodeLayer = document.getElementById(nodesId);
                const linkLayer = document.getElementById(linksId);
                if (!svg || !nodeLayer || !linkLayer) return null;
                const width = 400, height = 800, cols = opts.cols, rows = opts.rows;
                const nodes = [], links = [];
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        const baseX = opts.side === 'right' ? 240 : 10;
                        const px = baseX + (x/(cols-1))*150;
                        const py = (y/(rows-1))*height;
                        nodes.push({ x:px, y:py, r: 1.6 + Math.random()*1.6, jitterX: Math.random()*12, jitterY: Math.random()*18 });
                    }
                }
                const idx = (x,y)=>y*cols + x;
                for (let y = 0; y < rows; y++) {
                    for (let x = 0; x < cols; x++) {
                        if (x < cols-1) links.push([ idx(x,y), idx(x+1,y) ]);
                        if (y < rows-1) links.push([ idx(x,y), idx(x,y+1) ]);
                        if (x < cols-1 && y < rows-1) links.push([ idx(x,y), idx(x+1,y+1) ]);
                    }
                }
                const nodeEls = nodes.map(n => {
                    const c = document.createElementNS('http://www.w3.org/2000/svg','circle');
                    c.setAttribute('cx', n.x); c.setAttribute('cy', n.y); c.setAttribute('r', n.r);
                    nodeLayer.appendChild(c); return c;
                });
                const linkEls = links.map(([a,b]) => {
                    const l = document.createElementNS('http://www.w3.org/2000/svg','line');
                    const na = nodes[a], nb = nodes[b];
                    l.setAttribute('x1', na.x); l.setAttribute('y1', na.y);
                    l.setAttribute('x2', nb.x); l.setAttribute('y2', nb.y);
                    linkLayer.appendChild(l); return l;
                });
                return { cols, nodes, links, nodeEls, linkEls };
            }
            const right = buildNetwork('netSvg','nodes','links',{ side:'right', cols:6, rows:16 });
            const left  = buildNetwork('netSvgLeft','nodesL','linksL',{ side:'left', cols:5, rows:14 });
            if (!right || !left) return;
            const clamp = (v,min,max)=>Math.max(min,Math.min(max,v));
            const update = () => {
                const max = document.documentElement.scrollHeight - window.innerHeight;
                const p = max>0 ? window.scrollY / max : 0;
                const t = 0.5 - 0.5*Math.cos(Math.max(0, Math.min(1, p))*Math.PI);
                const sway = Math.sin(window.scrollY*0.003) * 8;
                ;[right,left].forEach((net,idx) => {
                    const swayDir = idx===0 ? 1 : -1;
                    net.nodes.forEach((n,i) => {
                        const phase = (i%net.cols)/net.cols;
                        const dx = (n.jitterX * t) * Math.sin(phase*Math.PI*2 + p*3.14) + sway*swayDir;
                        const dy = (n.jitterY * t) * Math.cos(phase*Math.PI*2 + p*3.14*0.7);
                        const x = n.x + dx, y = n.y + dy;
                        net.nodeEls[i].setAttribute('cx', x);
                        net.nodeEls[i].setAttribute('cy', y);
                    });
                    net.links.forEach(([a,b],i) => {
                        const na = net.nodeEls[a], nb = net.nodeEls[b];
                        net.linkEls[i].setAttribute('x1', na.getAttribute('cx'));
                        net.linkEls[i].setAttribute('y1', na.getAttribute('cy'));
                        net.linkEls[i].setAttribute('x2', nb.getAttribute('cx'));
                        net.linkEls[i].setAttribute('y2', nb.getAttribute('cy'));
                    });
                });
            };
            update();
            document.addEventListener('scroll', update, { passive: true });
            window.addEventListener('resize', update);
        });
    </script>
</body>
</html>